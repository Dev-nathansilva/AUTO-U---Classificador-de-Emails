<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AutoU • Classificador de Emails (IA)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome (7.0.0) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
      integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="../static/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="title">
          <!-- <div class="logo">AI</div> -->
          <img src="../static/images/logo-autou.png" alt="" class="logo" />
          <div>
            <h1>Classificador de Emails • AutoU</h1>
            <p class="subtitle">
              Suba um arquivo ou cole o conteúdo do email para classificar
              (Produtivo/Improdutivo) e gerar respostas automáticas.
            </p>
          </div>
        </div>
        <button class="toggle-theme tip" id="toggleTheme" data-tip="Tema Dark">
          Dark
        </button>
      </header>

      <!-- Grid principal: Entrada + Lateral (Histórico) -->
      <section class="grid">
        <!-- Coluna Esquerda: Entrada e Resultados -->
        <div class="stack" style="display: grid; gap: 18px">
          <!-- Card Entrada -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Entrada</h3>
              <p class="card-desc">
                Arraste um .txt/.pdf ou cole o texto abaixo.
              </p>
            </div>
            <div class="card-body" style="display: grid; gap: 14px">
              <div class="row">
                <div class="dropzone" id="dropzone">
                  <input id="fileInput" type="file" accept=".txt,.pdf" hidden />
                  <div
                    style="
                      display: flex;
                      flex-direction: column;
                      gap: 12px;
                      align-items: center;
                      justify-content: center;
                      min-height: 120px;
                      text-align: center;
                    "
                  >
                    <svg
                      width="28"
                      height="28"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M12 16V4m0 0l-4 4m4-4l4 4"
                        stroke="url(#g)"
                        stroke-width="1.6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M20 16v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2"
                        stroke="#e45d03"
                        stroke-width="1.6"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <defs>
                        <linearGradient id="g" x1="0" y1="0" x2="24" y2="24">
                          <stop stop-color="#e45d03" />
                          <stop offset="1" stop-color="#e45d03" />
                        </linearGradient>
                      </defs>
                    </svg>
                    <div>
                      <div style="font-weight: 600">
                        Arraste e solte ou <u>clique para escolher</u>
                      </div>
                      <div class="hint">Aceita .txt e .pdf • Máx 20MB</div>
                      <div
                        id="fileName"
                        class="hint"
                        style="margin-top: 6px"
                      ></div>
                    </div>
                  </div>
                </div>
                <div>
                  <textarea
                    id="emailText"
                    class="input"
                    placeholder="Cole aqui o conteúdo do email..."
                  ></textarea>
                  <div class="hint" style="margin-top: 8px; color: #4b4b4b">
                    Dica: Cole o texto do email na formatação (MBOX). Caso for
                    enviar múltiplos emails, o separador é "From".
                  </div>
                </div>
              </div>

              <div class="actions">
                <button id="processBtn" class="btn">Processar Email</button>
                <button id="clearBtn" class="btn btn-ghost">Limpar</button>
              </div>

              <!-- Loader / progresso -->
              <div
                id="loader"
                class="progress"
                style="
                  display: none;
                  justify-content: center;
                  align-items: center;
                  padding: 10px;
                "
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 50 50"
                  xmlns="http://www.w3.org/2000/svg"
                  style="animation: spin 1s linear infinite"
                >
                  <circle
                    cx="25"
                    cy="25"
                    r="20"
                    fill="none"
                    stroke="url(#grad)"
                    stroke-width="5"
                    stroke-linecap="round"
                  />
                  <defs>
                    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" stop-color="#e45d03" />
                      <stop offset="100%" stop-color="#ff8635" />
                    </linearGradient>
                  </defs>
                </svg>
              </div>
            </div>
          </div>

          <!-- Card Resultados -->
          <div class="card" id="resultsCard" style="display: none">
            <div
              class="card-header"
              style="
                display: flex;
                justify-content: space-between;
                align-items: start;
              "
            >
              <div>
                <h3 class="card-title">Resultados</h3>
                <p class="card-desc">
                  Categoria, palavras-chave e respostas geradas automaticamente.
                </p>
              </div>
              <button
                id="closeResults"
                style="
                  background: transparent;
                  border: none;
                  font-size: 18px;
                  color: #545454;
                  cursor: pointer;
                "
              >
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>
            <div class="card-body result" id="results"></div>
          </div>
        </div>

        <!-- Coluna Direita: Histórico -->
        <aside class="card">
          <div class="card-header">
            <h3 class="card-title">Histórico</h3>
            <p class="card-desc">Últimas análises nesta máquina.</p>
          </div>
          <div class="card-body">
            <div id="historyList" class="history-list"></div>
            <div class="actions" style="margin-top: 12px">
              <button id="clearHistory" class="btn btn-ghost">
                Limpar histórico
              </button>
            </div>
          </div>
        </aside>
      </section>

      <!-- Footer -->
      <footer
        style="
          margin-top: 28px;
          color: var(--muted);
          font-size: 12px;
          text-align: center;
        "
      >
        © Desenvolvido por nathandev • AutoU — <span id="year"> 2025</span>
      </footer>
    </div>

    <!-- Popup Modal -->
    <div
      id="resultPopup"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.75);
        justify-content: center;
        align-items: center;
        z-index: 9999;
      "
    >
      <div
        style="
          background: #10131a;
          padding: 24px;
          border-radius: 16px;
          max-width: 600px;
          width: 90%;
          position: relative;
        "
      >
        <button
          id="closePopup"
          style="
            position: absolute;
            top: 12px;
            right: 12px;
            background: transparent;
            color: #fff;
            border: none;
            font-size: 18px;
            cursor: pointer;
          "
        >
          ✖
        </button>
        <h3 style="margin-top: 0; color: #e45d03">Detalhes do Email</h3>
        <div
          id="popupContent"
          style="display: grid; gap: 10px; font-size: 14px; color: #e8eaed"
        ></div>
      </div>
    </div>

    <script src="../static/scripts/script.js"></script>
  </body>
</html>
